:root{--color-bg-0: #0a0e14;--color-bg-1: #12171f;--color-bg-2: #1a2129;--color-bg-3: #242b35;--color-paper-base: #e8e4d8;--color-paper-aged: #d4cdb8;--color-paper-shadow: #c4b89f;--color-paper-texture: rgba(232, 228, 216, .03);--color-gold-100: #d4af37;--color-gold-200: #b8941f;--color-gold-300: #9a7a15;--color-gold-dim: rgba(180, 148, 31, .15);--color-gold-glow: rgba(212, 175, 55, .25);--color-vermillion-100: #e63946;--color-vermillion-200: #c41e3a;--color-vermillion-300: #a01729;--color-vermillion-dim: rgba(196, 30, 58, .12);--color-moon-100: #a8b2c1;--color-moon-200: #8a95a5;--color-moon-300: #6d7785;--color-text-primary: #e8e4d8;--color-text-secondary: #b8b0a0;--color-text-tertiary: #8a8270;--color-text-disabled: #5a5448;--color-text-on-dark: #e8e4d8;--color-text-on-paper: #2a2520;--color-text-gold: #d4af37;--color-text-vermillion: #c41e3a;--color-line-subtle: rgba(232, 228, 216, .08);--color-line-normal: rgba(232, 228, 216, .15);--color-line-strong: rgba(232, 228, 216, .25);--color-line-gold: rgba(180, 148, 31, .4);--color-line-vermillion: rgba(196, 30, 58, .4);--color-overlay-light: rgba(10, 14, 20, .4);--color-overlay-medium: rgba(10, 14, 20, .6);--color-overlay-heavy: rgba(10, 14, 20, .8);--font-family-base: "Noto Serif SC", "Source Han Serif SC", serif;--font-family-title: "Noto Serif SC", "Source Han Serif SC", serif;--font-family-mono: "Courier New", "Consolas", monospace;--font-size-xs: 12px;--font-size-sm: 14px;--font-size-base: 16px;--font-size-lg: 18px;--font-size-xl: 20px;--font-size-2xl: 24px;--font-size-3xl: 32px;--font-size-4xl: 40px;--font-size-5xl: 48px;--line-height-tight: 1.25;--line-height-normal: 1.5;--line-height-relaxed: 1.75;--line-height-loose: 2;--font-weight-normal: 400;--font-weight-medium: 500;--font-weight-semibold: 600;--font-weight-bold: 700;--letter-spacing-tighter: -.02em;--letter-spacing-tight: -.01em;--letter-spacing-normal: 0;--letter-spacing-wide: .01em;--letter-spacing-wider: .02em;--spacing-0: 0;--spacing-1: 4px;--spacing-2: 8px;--spacing-3: 12px;--spacing-4: 16px;--spacing-5: 20px;--spacing-6: 24px;--spacing-8: 32px;--spacing-10: 40px;--spacing-12: 48px;--spacing-16: 64px;--spacing-20: 80px;--spacing-24: 96px;--radius-none: 0;--radius-sm: 2px;--radius-base: 4px;--radius-md: 6px;--radius-lg: 8px;--radius-xl: 12px;--radius-2xl: 16px;--radius-full: 9999px;--shadow-none: none;--shadow-sm: 0 1px 2px rgba(0, 0, 0, .3);--shadow-base: 0 2px 4px rgba(0, 0, 0, .4);--shadow-md: 0 4px 8px rgba(0, 0, 0, .5);--shadow-lg: 0 8px 16px rgba(0, 0, 0, .6);--shadow-xl: 0 12px 24px rgba(0, 0, 0, .7);--shadow-gold-glow: 0 0 12px rgba(212, 175, 55, .3);--shadow-gold-glow-strong: 0 0 20px rgba(212, 175, 55, .5);--shadow-paper: 0 2px 8px rgba(0, 0, 0, .3), 0 1px 2px rgba(0, 0, 0, .2);--duration-instant: .12s;--duration-fast: .18s;--duration-base: .24s;--duration-slow: .32s;--duration-slower: .4s;--easing-out: cubic-bezier(.16, 1, .3, 1);--easing-in: cubic-bezier(.7, 0, .84, 0);--easing-in-out: cubic-bezier(.65, 0, .35, 1);--easing-spring: cubic-bezier(.34, 1.56, .64, 1);--z-base: 0;--z-bg: 0;--z-mid: 10;--z-char: 20;--z-fx: 30;--z-ui: 40;--z-top: 50;--z-modal: 100;--z-toast: 200;--z-tooltip: 300}.paper-texture{background-image:repeating-linear-gradient(0deg,transparent,transparent 2px,var(--color-paper-texture) 2px,var(--color-paper-texture) 4px),repeating-linear-gradient(90deg,transparent,transparent 2px,var(--color-paper-texture) 2px,var(--color-paper-texture) 4px)}.vignette{position:relative}.vignette:after{content:"";position:absolute;top:0;right:0;bottom:0;left:0;background:radial-gradient(circle at center,transparent 0%,var(--color-overlay-light) 100%);pointer-events:none}.gold-border{border:1px solid var(--color-line-gold)}.gold-border-thick{border:2px solid var(--color-line-gold)}.seal{display:inline-flex;align-items:center;justify-content:center;width:48px;height:48px;border-radius:var(--radius-full);background:var(--color-vermillion-200);color:var(--color-paper-base);font-size:var(--font-size-sm);font-weight:var(--font-weight-bold);box-shadow:var(--shadow-base);position:relative}.seal:before{content:"";position:absolute;top:2px;right:2px;bottom:2px;left:2px;border-radius:var(--radius-full);border:1px solid var(--color-paper-base)}.wax-seal{position:relative;display:inline-block;padding:var(--spacing-2) var(--spacing-4);background:var(--color-vermillion-200);color:var(--color-paper-base);font-size:var(--font-size-sm);font-weight:var(--font-weight-semibold);border-radius:var(--radius-base);box-shadow:var(--shadow-base)}.wax-seal:before{content:"";position:absolute;top:-4px;left:50%;transform:translate(-50%);width:0;height:0;border-left:6px solid transparent;border-right:6px solid transparent;border-bottom:6px solid var(--color-vermillion-200)}.dialog-box{display:flex;flex-direction:column;height:100%;position:relative;background:var(--color-bg-2);border:2px solid var(--color-line-gold);border-radius:var(--radius-md);box-shadow:var(--shadow-paper);overflow:hidden}.dialog-nameplate{padding:var(--spacing-3) var(--spacing-4);background:linear-gradient(135deg,var(--color-gold-200),var(--color-gold-300));border-bottom:1px solid var(--color-line-gold);display:flex;align-items:center;justify-content:space-between;box-shadow:inset 0 1px #ffffff1a}.dialog-name{font-family:var(--font-family-title);font-size:var(--font-size-base);font-weight:var(--font-weight-semibold);color:var(--color-bg-0);letter-spacing:var(--letter-spacing-wide)}.dialog-tag{font-size:var(--font-size-xs);color:var(--color-bg-1);padding:var(--spacing-1) var(--spacing-2);background:#fff3;border-radius:var(--radius-sm);font-weight:var(--font-weight-medium)}.dialog-content{flex:1;padding:var(--spacing-6);background:var(--color-paper-base);background-image:repeating-linear-gradient(0deg,transparent,transparent 2px,rgba(42,37,32,.02) 2px,rgba(42,37,32,.02) 4px);overflow-y:auto;overflow-x:hidden;color:var(--color-text-on-paper);line-height:var(--line-height-relaxed);position:relative;scrollbar-width:thin;scrollbar-color:var(--color-gold-dim) transparent}.dialog-content::-webkit-scrollbar{width:6px}.dialog-content::-webkit-scrollbar-track{background:transparent}.dialog-content::-webkit-scrollbar-thumb{background:var(--color-gold-dim);border-radius:3px}.dialog-content:after{content:"";position:absolute;top:0;right:0;bottom:0;left:0;border-radius:inherit;background:radial-gradient(circle at center,transparent 0%,rgba(42,37,32,.05) 100%);pointer-events:none}.dialog-text{margin:0;white-space:pre-wrap;word-wrap:break-word;position:relative;z-index:1}.dialog-continue{position:absolute;bottom:var(--spacing-4);right:var(--spacing-4);width:0;height:0;border-style:solid;border-width:0 0 20px 20px;border-color:transparent transparent var(--color-gold-200) transparent;opacity:.7;z-index:2;animation:continue-pulse 1.5s ease-in-out infinite}@keyframes continue-pulse{0%,to{opacity:.7}50%{opacity:.3}}.dialog-box.mode-read .dialog-nameplate{background:linear-gradient(135deg,var(--color-gold-100),var(--color-gold-200))}.dialog-box.mode-trial{box-shadow:var(--shadow-lg),var(--shadow-gold-glow);border-color:var(--color-gold-100)}.dialog-box.mode-trial .dialog-nameplate{background:linear-gradient(135deg,var(--color-gold-200),var(--color-gold-300));border-bottom-width:2px}.dialog-box.mode-trial .dialog-content{background:var(--color-paper-aged);box-shadow:inset 0 2px 4px #0000001a}.dialog-box.mode-archive{border-top-width:4px;border-top-color:var(--color-vermillion-200)}.dialog-box.mode-archive .dialog-nameplate{background:linear-gradient(135deg,var(--color-gold-300),var(--color-bg-3));border-color:var(--color-vermillion-200)}.dialog-box.mode-archive .dialog-content{background:var(--color-paper-shadow);position:relative}.dialog-box.mode-archive .dialog-content:before{content:"";position:absolute;top:0;left:0;width:4px;height:100%;background:var(--color-vermillion-200);z-index:2}.action-bar{display:flex;flex-direction:column;gap:var(--spacing-3);padding:var(--spacing-4)}.action-item{padding:var(--spacing-4) var(--spacing-6);background:var(--color-paper-base);background-image:repeating-linear-gradient(0deg,transparent,transparent 2px,rgba(42,37,32,.02) 2px,rgba(42,37,32,.02) 4px);border:2px solid var(--color-line-gold);border-left:4px solid var(--color-gold-200);border-radius:var(--radius-base);cursor:pointer;transition:all var(--duration-fast) var(--easing-out);position:relative;overflow:hidden;box-shadow:var(--shadow-base)}.action-item:hover{background:var(--color-paper-aged);border-left-color:var(--color-gold-100);transform:translate(4px);box-shadow:var(--shadow-md),var(--shadow-gold-glow)}.action-item:active{transform:translate(2px);box-shadow:var(--shadow-sm)}.action-verb{display:inline-block;font-family:var(--font-family-title);font-size:var(--font-size-sm);font-weight:var(--font-weight-semibold);color:var(--color-text-gold);padding:var(--spacing-1) var(--spacing-3);background:var(--color-gold-dim);border:1px solid var(--color-line-gold);border-radius:var(--radius-sm);margin-right:var(--spacing-3)}.action-text{color:var(--color-text-on-paper);line-height:var(--line-height-normal);font-size:var(--font-size-base)}.action-item.selected{background:var(--color-paper-shadow);border-left-color:var(--color-vermillion-200);border-left-width:6px;pointer-events:none;box-shadow:var(--shadow-lg)}.action-item.selected:after{content:"✓";position:absolute;top:50%;right:var(--spacing-6);transform:translateY(-50%);font-size:var(--font-size-3xl);color:var(--color-vermillion-200);font-weight:var(--font-weight-bold);animation:stamp-appear .3s var(--easing-spring)}@keyframes stamp-appear{0%{transform:translateY(-50%) scale(0) rotate(-15deg);opacity:0}60%{transform:translateY(-50%) scale(1.2) rotate(5deg)}to{transform:translateY(-50%) scale(1) rotate(0);opacity:1}}.action-item.disabled{opacity:.5;cursor:not-allowed;background:var(--color-bg-2);border-color:var(--color-line-subtle)}.action-item.disabled:before{content:"";position:absolute;top:50%;left:0;right:0;height:2px;background:repeating-linear-gradient(90deg,var(--color-line-normal) 0px,var(--color-line-normal) 10px,transparent 10px,transparent 20px);transform:translateY(-50%)}.pov-switcher{display:flex;gap:var(--spacing-2);padding:var(--spacing-3);background:#1a2129e6;-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px);border:1px solid var(--color-line-gold);border-radius:var(--radius-lg);box-shadow:var(--shadow-md)}.pov-button{padding:var(--spacing-2) var(--spacing-4);background:var(--color-bg-2);border:1px solid var(--color-line-normal);color:var(--color-text-secondary);font-family:var(--font-family-title);font-size:var(--font-size-sm);font-weight:var(--font-weight-medium);cursor:pointer;transition:all var(--duration-fast) var(--easing-out);border-radius:var(--radius-base);position:relative}.pov-button:hover:not(:disabled){background:var(--color-bg-3);border-color:var(--color-line-gold);color:var(--color-text-primary);transform:translateY(-2px);box-shadow:var(--shadow-sm)}.pov-button.active{background:var(--color-gold-200);color:var(--color-bg-0);border-color:var(--color-gold-100);font-weight:var(--font-weight-semibold);box-shadow:var(--shadow-gold-glow)}.pov-button.active:before{content:"";position:absolute;top:2px;right:2px;bottom:2px;left:2px;border-radius:var(--radius-sm);border:1px solid rgba(255,255,255,.3);pointer-events:none}.pov-button:disabled{opacity:.3;cursor:not-allowed;background:var(--color-bg-1)}.scene-navigator{display:flex;gap:var(--spacing-2);padding:var(--spacing-3);background:#1a2129e6;-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px);border:1px solid var(--color-line-gold);border-radius:var(--radius-lg);box-shadow:var(--shadow-md);align-items:center}.nav-button{width:36px;height:36px;background:var(--color-bg-2);border:1px solid var(--color-line-normal);color:var(--color-text-primary);cursor:pointer;transition:all var(--duration-fast) var(--easing-out);border-radius:var(--radius-base);display:flex;align-items:center;justify-content:center;font-size:var(--font-size-2xl);font-weight:var(--font-weight-bold)}.nav-button:hover:not(:disabled){background:var(--color-bg-3);border-color:var(--color-line-gold);transform:scale(1.1);box-shadow:var(--shadow-sm),var(--shadow-gold-glow)}.nav-button:active:not(:disabled){transform:scale(.95)}.nav-button:disabled{opacity:.3;cursor:not-allowed;background:var(--color-bg-1);color:var(--color-text-disabled)}.scene-title{padding:0 var(--spacing-4);color:var(--color-text-primary);font-family:var(--font-family-title);font-size:var(--font-size-base);font-weight:var(--font-weight-medium);display:flex;align-items:center;letter-spacing:var(--letter-spacing-wide);min-width:200px;justify-content:center}.status-badge{position:absolute;top:var(--spacing-3);right:var(--spacing-3);padding:var(--spacing-1) var(--spacing-3);background:var(--color-vermillion-200);color:var(--color-paper-base);font-family:var(--font-family-title);font-size:var(--font-size-xs);font-weight:var(--font-weight-semibold);border-radius:var(--radius-sm);box-shadow:var(--shadow-base);z-index:10}.status-badge.warning{background:var(--color-gold-200);color:var(--color-bg-0)}.status-badge.info{background:var(--color-bg-3);color:var(--color-text-primary);border:1px solid var(--color-line-gold)}.status-badge.danger{background:var(--color-vermillion-200);color:var(--color-paper-base)}.settle-effect{animation:settle-in var(--duration-base) var(--easing-out)}@keyframes settle-in{0%{opacity:0;transform:translateY(-20px)}to{opacity:1;transform:translateY(0)}}.stamp-effect{animation:stamp-down var(--duration-slow) var(--easing-spring)}@keyframes stamp-down{0%{transform:translateY(-10px) scale(1.1)}50%{transform:translateY(2px) scale(.98)}to{transform:translateY(0) scale(1)}}.nameplate-change{animation:nameplate-flip var(--duration-base) var(--easing-in-out)}@keyframes nameplate-flip{0%{transform:rotateX(0)}50%{transform:rotateX(90deg);opacity:.5}to{transform:rotateX(0);opacity:1}}.continue-indicator{display:block!important;animation:continue-pulse 1.5s ease-in-out infinite}.btn{display:inline-flex;align-items:center;justify-content:center;gap:var(--spacing-2);padding:var(--spacing-3) var(--spacing-6);font-family:var(--font-family-base);font-size:var(--font-size-base);font-weight:var(--font-weight-medium);line-height:var(--line-height-tight);text-align:center;text-decoration:none;white-space:nowrap;border:1px solid transparent;border-radius:var(--radius-base);cursor:pointer;transition:background-color var(--duration-fast) var(--easing-out),border-color var(--duration-fast) var(--easing-out),color var(--duration-fast) var(--easing-out),box-shadow var(--duration-fast) var(--easing-out),transform var(--duration-instant) var(--easing-out);-webkit-user-select:none;user-select:none}.btn:focus-visible{outline:2px solid var(--color-gold-200);outline-offset:2px}.btn-primary{background:var(--color-gold-200);color:var(--color-bg-0);border-color:var(--color-gold-300);box-shadow:var(--shadow-base)}.btn-primary:hover{background:var(--color-gold-100);border-color:var(--color-gold-200);box-shadow:var(--shadow-gold-glow)}.btn-primary:active{background:var(--color-gold-300);transform:translateY(1px);box-shadow:var(--shadow-sm)}.btn-secondary{background:transparent;color:var(--color-text-primary);border-color:var(--color-line-gold)}.btn-secondary:hover{background:var(--color-gold-dim);border-color:var(--color-gold-200)}.btn-secondary:active{background:var(--color-bg-2);transform:translateY(1px)}.btn-danger{background:var(--color-vermillion-200);color:var(--color-paper-base);border-color:var(--color-vermillion-300);box-shadow:var(--shadow-base)}.btn-danger:hover{background:var(--color-vermillion-100)}.btn-danger:active{background:var(--color-vermillion-300);transform:translateY(1px)}.btn:disabled,.btn.disabled{background:var(--color-bg-2);color:var(--color-text-disabled);border-color:var(--color-line-subtle);cursor:not-allowed;box-shadow:none;opacity:.5}.btn:disabled:hover,.btn.disabled:hover{transform:none}.btn-sm{padding:var(--spacing-2) var(--spacing-4);font-size:var(--font-size-sm)}.btn-lg{padding:var(--spacing-4) var(--spacing-8);font-size:var(--font-size-lg)}.panel{background:var(--color-bg-2);border:1px solid var(--color-line-normal);border-radius:var(--radius-md);padding:var(--spacing-6);box-shadow:var(--shadow-base)}.panel-paper{background:var(--color-paper-base);background-image:repeating-linear-gradient(0deg,transparent,transparent 2px,rgba(42,37,32,.02) 2px,rgba(42,37,32,.02) 4px);border:2px solid var(--color-gold-200);border-radius:var(--radius-base);padding:var(--spacing-6);box-shadow:var(--shadow-paper);color:var(--color-text-on-paper);position:relative}.panel-paper:after{content:"";position:absolute;top:0;right:0;bottom:0;left:0;border-radius:inherit;background:radial-gradient(circle at center,transparent 0%,rgba(42,37,32,.05) 100%);pointer-events:none}.panel-glass{background:#1a2129cc;-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px);border:1px solid var(--color-line-subtle);border-radius:var(--radius-lg);padding:var(--spacing-6);box-shadow:var(--shadow-lg)}.panel-title{font-size:var(--font-size-xl);font-weight:var(--font-weight-semibold);color:var(--color-text-gold);margin-bottom:var(--spacing-4);padding-bottom:var(--spacing-3);border-bottom:1px solid var(--color-line-gold)}.tag{display:inline-flex;align-items:center;gap:var(--spacing-1);padding:var(--spacing-1) var(--spacing-3);font-size:var(--font-size-sm);font-weight:var(--font-weight-medium);border-radius:var(--radius-full);white-space:nowrap}.tag-default{background:var(--color-bg-3);color:var(--color-text-secondary);border:1px solid var(--color-line-subtle)}.tag-gold{background:var(--color-gold-dim);color:var(--color-text-gold);border:1px solid var(--color-line-gold)}.tag-vermillion{background:var(--color-vermillion-dim);color:var(--color-text-vermillion);border:1px solid var(--color-line-vermillion)}.modal-overlay{position:fixed;top:0;right:0;bottom:0;left:0;background:var(--color-overlay-heavy);-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px);z-index:var(--z-modal);display:flex;align-items:center;justify-content:center;padding:var(--spacing-6)}.modal{background:var(--color-bg-1);border:2px solid var(--color-gold-200);border-radius:var(--radius-lg);padding:var(--spacing-8);max-width:600px;width:100%;max-height:80vh;overflow-y:auto;box-shadow:var(--shadow-xl),var(--shadow-gold-glow);position:relative}.modal-header{display:flex;align-items:center;justify-content:space-between;margin-bottom:var(--spacing-6);padding-bottom:var(--spacing-4);border-bottom:1px solid var(--color-line-gold)}.modal-title{font-size:var(--font-size-2xl);font-weight:var(--font-weight-semibold);color:var(--color-text-gold)}.modal-close{width:32px;height:32px;display:flex;align-items:center;justify-content:center;background:transparent;border:none;color:var(--color-text-secondary);cursor:pointer;border-radius:var(--radius-base);transition:all var(--duration-fast) var(--easing-out)}.modal-close:hover{background:var(--color-bg-3);color:var(--color-text-primary)}.modal-body{color:var(--color-text-primary);line-height:var(--line-height-relaxed)}.modal-footer{display:flex;gap:var(--spacing-3);justify-content:flex-end;margin-top:var(--spacing-6);padding-top:var(--spacing-4);border-top:1px solid var(--color-line-subtle)}.list{display:flex;flex-direction:column;gap:var(--spacing-2)}.list-row{display:flex;align-items:center;gap:var(--spacing-4);padding:var(--spacing-4);background:var(--color-bg-2);border:1px solid var(--color-line-subtle);border-radius:var(--radius-base);cursor:pointer;transition:all var(--duration-fast) var(--easing-out)}.list-row:hover{background:var(--color-bg-3);border-color:var(--color-line-gold);transform:translate(4px)}.list-row:active{transform:translate(2px)}.list-row-selected{background:var(--color-gold-dim);border-color:var(--color-gold-200)}.list-row-disabled{opacity:.5;cursor:not-allowed}.list-row-disabled:hover{transform:none}.input{width:100%;padding:var(--spacing-3) var(--spacing-4);font-family:var(--font-family-base);font-size:var(--font-size-base);color:var(--color-text-primary);background:var(--color-bg-2);border:1px solid var(--color-line-normal);border-radius:var(--radius-base);transition:all var(--duration-fast) var(--easing-out)}.input:focus{outline:none;border-color:var(--color-gold-200);box-shadow:0 0 0 2px var(--color-gold-dim)}.input:disabled{opacity:.5;cursor:not-allowed}.input::placeholder{color:var(--color-text-tertiary)}.card{background:var(--color-bg-2);border:1px solid var(--color-line-normal);border-radius:var(--radius-md);overflow:hidden;transition:all var(--duration-fast) var(--easing-out)}.card:hover{border-color:var(--color-line-gold);box-shadow:var(--shadow-md);transform:translateY(-2px)}.card-image{width:100%;height:200px;object-fit:cover}.card-body{padding:var(--spacing-4)}.card-title{font-size:var(--font-size-lg);font-weight:var(--font-weight-semibold);color:var(--color-text-primary);margin-bottom:var(--spacing-2)}.card-text{color:var(--color-text-secondary);line-height:var(--line-height-normal)}.divider{height:1px;background:var(--color-line-subtle);margin:var(--spacing-6) 0}.divider-gold{background:var(--color-line-gold)}.badge{display:inline-flex;align-items:center;justify-content:center;min-width:20px;height:20px;padding:0 var(--spacing-1);font-size:var(--font-size-xs);font-weight:var(--font-weight-bold);line-height:1;background:var(--color-vermillion-200);color:var(--color-paper-base);border-radius:var(--radius-full)}.badge-gold{background:var(--color-gold-200);color:var(--color-bg-0)}*{margin:0;padding:0;box-sizing:border-box}html,body{width:100%;height:100%;overflow:hidden}body{font-family:var(--font-family-base);font-size:var(--font-size-base);line-height:var(--line-height-normal);color:var(--color-text-primary);background-color:var(--color-bg-0)}#app{position:relative;width:100%;height:100%;overflow:hidden}.layer{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none}.layer>*{pointer-events:auto}.layer-bg{z-index:var(--z-bg)}.layer-mid{z-index:var(--z-mid)}.layer-char{z-index:var(--z-char)}.layer-fx{z-index:var(--z-fx)}.layer-ui{z-index:var(--z-ui);pointer-events:auto}.layer-top{z-index:var(--z-top)}.bg-container{width:100%;height:100%;background-size:cover;background-position:center;background-repeat:no-repeat;transition:opacity var(--duration-base) var(--easing-out)}.bg-container.fade-out{opacity:0}.char-container{position:absolute;bottom:0;height:80%;display:flex;align-items:flex-end;transition:all var(--duration-base) var(--easing-out)}.char-container.single{left:10%}.char-container.main-pov{left:20%;filter:brightness(1.1);z-index:calc(var(--z-char) + 1)}.char-container.secondary-pov{right:20%;filter:brightness(.8);opacity:.9}.char-image{max-height:100%;object-fit:contain;object-position:bottom}#dialog-box{position:absolute;bottom:0;left:0;right:0;height:240px;padding:var(--spacing-4);background:var(--color-bg-1);border-top:2px solid var(--color-line-gold);box-shadow:0 -4px 12px #0009;overflow:hidden}#action-bar{position:absolute;bottom:calc(240px + var(--spacing-8));left:50%;transform:translate(-50%);max-width:600px;width:90%}#pov-switcher{position:absolute;top:var(--spacing-8);right:var(--spacing-8)}#scene-navigator{position:absolute;top:var(--spacing-8);left:var(--spacing-8)}@media (max-width: 768px){#dialog-box{height:180px;padding:var(--spacing-3)}.char-container{height:70%}#action-bar{width:95%}}@media (max-width: 480px){#dialog-box{height:160px;padding:var(--spacing-2)}body{font-size:14px}.char-container{height:60%}}.safe-area{padding:var(--spacing-8)}@media (max-width: 768px){.safe-area{padding:var(--spacing-4)}}@keyframes stamp-down{0%{transform:translateY(-10px) scale(1.1);opacity:0}to{transform:translateY(0) scale(1);opacity:1}}.stamp-effect{animation:stamp-down var(--anim-short) var(--ease-sharp)}@keyframes zhu-pi{0%{width:0;opacity:0}to{width:100%;opacity:1}}.zhu-pi-effect{animation:zhu-pi var(--anim-standard) var(--ease-out)}@keyframes seal-open{0%{clip-path:inset(0 0 0 0)}to{clip-path:inset(0 0 0 20%)}}.seal-open-effect{animation:seal-open var(--anim-standard) var(--ease-out)}@keyframes item-settle{0%{transform:translateY(-5px);opacity:0}to{transform:translateY(0);opacity:1}}.settle-effect{animation:item-settle var(--anim-short) var(--ease-out)}@keyframes fade-in{0%{opacity:0}to{opacity:1}}@keyframes fade-out{0%{opacity:1}to{opacity:0}}.fade-in{animation:fade-in var(--anim-standard) var(--ease-out)}.fade-out{animation:fade-out var(--anim-standard) var(--ease-out)}@keyframes nameplate-slide{0%{transform:translate(-100%);opacity:0}to{transform:translate(0);opacity:1}}.nameplate-change{animation:nameplate-slide var(--anim-standard) var(--ease-out)}@keyframes seal-stamp{0%{transform:translateY(-20px) rotate(-5deg) scale(.9);opacity:0}60%{transform:translateY(2px) rotate(0) scale(1.05)}to{transform:translateY(0) rotate(0) scale(1);opacity:1}}.seal-stamp-effect{animation:seal-stamp var(--anim-standard) var(--ease-sharp)}@keyframes page-turn{0%{transform:rotateY(0)}50%{transform:rotateY(90deg);opacity:0}51%{transform:rotateY(-90deg);opacity:0}to{transform:rotateY(0);opacity:1}}.page-turn-effect{animation:page-turn var(--anim-standard) var(--ease-in-out);transform-style:preserve-3d}@keyframes corner-fold{0%,to{transform:translateY(0)}50%{transform:translateY(-3px)}}.continue-indicator{animation:corner-fold 1.5s ease-in-out infinite}@keyframes spotlight-on{0%{filter:brightness(.8)}to{filter:brightness(1.1)}}@keyframes spotlight-off{0%{filter:brightness(1.1)}to{filter:brightness(.8)}}.spotlight-on{animation:spotlight-on var(--anim-standard) var(--ease-out)}.spotlight-off{animation:spotlight-off var(--anim-standard) var(--ease-out)}.will-animate{will-change:transform,opacity}.gpu-accelerated{transform:translateZ(0);backface-visibility:hidden}@media (prefers-reduced-motion: reduce){*,*:before,*:after{animation-duration:.01ms!important;animation-iteration-count:1!important;transition-duration:.01ms!important}}body{font-family:var(--font-family-base);font-size:var(--font-size-base);line-height:var(--line-height-normal);color:var(--text-primary);-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;text-rendering:optimizeLegibility}h1,h2,h3,h4,h5,h6{font-family:var(--font-family-title);font-weight:600;line-height:var(--line-height-tight);margin:0;color:var(--text-primary)}h1{font-size:var(--font-size-3xl);letter-spacing:.02em}h2{font-size:var(--font-size-2xl);letter-spacing:.02em}h3{font-size:var(--font-size-xl);letter-spacing:.01em}h4{font-size:var(--font-size-lg)}h5{font-size:var(--font-size-base)}h6{font-size:var(--font-size-sm)}p{margin:0 0 var(--space-md) 0;line-height:var(--line-height-relaxed)}p:last-child{margin-bottom:0}strong,b{font-weight:700;color:var(--text-primary)}em,i{font-style:italic;color:var(--text-secondary)}del,s{text-decoration:line-through;opacity:.6}u{text-decoration:underline;text-decoration-color:var(--gold-order-200);text-underline-offset:2px}blockquote{margin:var(--space-md) 0;padding:var(--space-md);padding-left:var(--space-lg);border-left:var(--border-width-thick) solid var(--gold-order-200);background:var(--paper-info-200);font-style:italic;color:var(--text-secondary)}blockquote p:last-child{margin-bottom:0}code{font-family:Courier New,monospace;font-size:.9em;padding:2px 6px;background:var(--cold-base-200);border:var(--border-width-thin) solid var(--cold-base-300);border-radius:var(--border-radius-sm);color:var(--text-primary)}pre{margin:var(--space-md) 0;padding:var(--space-md);background:var(--cold-base-200);border:var(--border-width-thin) solid var(--cold-base-300);border-radius:var(--border-radius-md);overflow-x:auto}pre code{padding:0;background:none;border:none}ul,ol{margin:var(--space-md) 0;padding-left:var(--space-xl)}li{margin:var(--space-xs) 0;line-height:var(--line-height-normal)}ul{list-style-type:none}ul li:before{content:"•";color:var(--gold-order-200);font-weight:700;display:inline-block;width:1em;margin-left:-1em}a{color:var(--gold-order-200);text-decoration:none;transition:color var(--anim-instant) var(--ease-out)}a:hover{color:var(--gold-order-100);text-decoration:underline}a:active{color:var(--gold-order-300)}.term{color:var(--gold-order-dark);font-weight:600;cursor:help;border-bottom:1px dotted var(--gold-order-dim)}.highlight{background:linear-gradient(to bottom,transparent 0%,transparent 40%,rgba(196,30,58,.2) 40%,rgba(196,30,58,.2) 90%,transparent 90%);padding:0 2px;font-weight:600}.archive-id{font-family:Courier New,monospace;font-size:var(--font-size-sm);color:var(--cold-base-600);background:var(--cold-base-200);padding:2px 6px;border:var(--border-width-thin) solid var(--cold-base-300);border-radius:var(--border-radius-sm)}.character-name{font-family:var(--font-family-title);font-weight:600;color:var(--text-primary)}.location-name{font-style:italic;color:var(--text-secondary)}.text-left{text-align:left}.text-center{text-align:center}.text-right{text-align:right}.text-justify{text-align:justify}.text-xs{font-size:var(--font-size-xs)}.text-sm{font-size:var(--font-size-sm)}.text-base{font-size:var(--font-size-base)}.text-lg{font-size:var(--font-size-lg)}.text-xl{font-size:var(--font-size-xl)}.text-primary{color:var(--text-primary)}.text-secondary{color:var(--text-secondary)}.text-tertiary{color:var(--text-tertiary)}.text-on-dark{color:var(--text-on-dark)}.text-on-paper{color:var(--text-on-paper)}@media (max-width: 768px){:root{--font-size-base: 15px;--font-size-lg: 17px;--font-size-xl: 19px;--font-size-2xl: 22px;--font-size-3xl: 28px}}@media (max-width: 480px){:root{--font-size-base: 14px;--font-size-lg: 16px;--font-size-xl: 18px;--font-size-2xl: 20px;--font-size-3xl: 24px}}::selection{background:var(--gold-order-dim);color:var(--text-primary)}::-moz-selection{background:var(--gold-order-dim);color:var(--text-primary)}.lang-zh{font-family:"Noto Serif SC","Source Han Serif SC",serif;word-break:break-all;line-break:strict}.lang-ko{font-family:"Noto Serif KR",Nanum Myeongjo,Malgun Gothic,serif;word-break:keep-all;line-break:strict;word-spacing:0;letter-spacing:-.02em}.lang-ja{font-family:"Noto Serif JP",Yu Mincho,Hiragino Mincho ProN,serif;word-break:break-all;line-break:strict}.lang-en{font-family:"Noto Serif",Georgia,Times New Roman,serif;word-break:break-word;-webkit-hyphens:auto;hyphens:auto}.lang-ar{font-family:Noto Naskh Arabic,Arial,sans-serif;direction:rtl;text-align:right;word-break:break-word}.lang-fr{font-family:"Noto Serif",Georgia,serif;word-break:break-word;-webkit-hyphens:auto;hyphens:auto}.lang-ru{font-family:"Noto Serif",Georgia,serif;word-break:break-word}.lang-es,.lang-de{font-family:"Noto Serif",Georgia,serif;word-break:break-word;-webkit-hyphens:auto;hyphens:auto}.dual-language-container{display:flex;flex-direction:column;gap:var(--space-md)}.dual-language-item{padding:var(--space-sm);border-left:var(--border-width-thick) solid var(--gold-order-200)}.dual-language-item.primary{border-color:var(--gold-order-200)}.dual-language-item.secondary{border-color:var(--cold-base-400);opacity:.8}.lang-ko .dialog-text{line-height:1.8}.lang-ko .action-text{letter-spacing:0}.lang-ko:before,.lang-ko:after{content:""}[dir=rtl]{direction:rtl}[dir=rtl] .dialog-box{text-align:right}[dir=rtl] .action-bar{flex-direction:row-reverse}@media (max-width: 768px){.lang-ko{font-size:15px;line-height:1.75}.dual-language-container{gap:var(--space-sm)}}
